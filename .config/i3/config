# ---------------------------------
# -- Main Configuration:
# ---------------------------------

# Set mod key to Winkey.
set $mod        Mod4

# Window border multiplier.
set $borders    1

# Number of pixels to resize by in resize mode.
set $resize     2

# Set gap sizes.
set $gapso      0
set $gapsi      8
set $pgapsi		8
set $pgapso     38
set $qtgapsi     10
set $qtgapso     210

# Set terminal.
set $term termite

# Window options.
focus_follows_mouse             true
popup_during_fullscreen         smart

# Workspace options.
workspace_layout                default
workspace_auto_back_and_forth   true

# Window borders:
hide_edge_borders   true
new_float           pixel $borders
new_window          pixel $borders
smart_borders       no_gaps

# Set initial gaps.
gaps inner   $gapsi
gaps outer   $gapso

# Set workspace names.
set $ws1    "1cafe"
set $ws2    "2code"
set $ws3    "3fire"
set $ws4    "4term"
set $ws5    "5arts"

# Make certain windows floating on launch.
for_window [class="^Steam$"] 					floating enable

# Start a few things on boot.
exec --no-startup-id i3-msg 'workspace 2; exec termite; workspace 1'

# ---------------------------------
# -- WM bindings:
# ---------------------------------

# Restart i3.
bindsym $mod+Shift+r    restart

# Disable and enable gaps.
bindsym $mod+n          gaps inner current set 0; gaps outer current \
set 0
bindsym $mod+m          gaps inner current set $gapsi; gaps outer \
current set $gapso
bindsym $mod+Shift+m	gaps inner current set $pgapsi; gaps outer \
current set $pgapso
bindsym $mod+Shift+n    gaps inner current set $qtgapsi; gaps outer \
current set $qtgapso

# Kill focused window.
bindsym $mod+Shift+q    kill

# Focus parent/child.
bindsym $mod+a 			focus parent
bindsym $mod+b 			focus child

# Focus bindings.
bindsym $mod+h 			focus left
bindsym $mod+j 			focus down
bindsym $mod+k 			focus up
bindsym $mod+l 	        focus right

# Same as above, with cursor keys.
bindsym $mod+Left 		focus left
bindsym $mod+Down 		focus down
bindsym $mod+Up 		focus up
bindsym $mod+Right 		focus right

# Focus last urgent window.
bindsym $mod+u          [urgent=latest] focus

# Switch to workspace.
bindsym $mod+comma     		workspace prev
bindsym $mod+period     	workspace next
bindsym $mod+1 			workspace $ws1
bindsym $mod+2 			workspace $ws2
bindsym $mod+3 			workspace $ws3
bindsym $mod+4 			workspace $ws4
bindsym $mod+5 			workspace $ws5

# Move to workspace.
bindsym $mod+Shift+comma  move container to workspace prev
bindsym $mod+Shift+period move container to workspace next
bindsym $mod+Shift+1 	  move container to workspace $ws1
bindsym $mod+Shift+2 	  move container to workspace $ws2
bindsym $mod+Shift+3 	  move container to workspace $ws3
bindsym $mod+Shift+4 	  move container to workspace $ws4
bindsym $mod+Shift+5	  move container to workspace $ws5

# Shift tiled/floating window.
bindsym $mod+Shift+h 			move left
bindsym $mod+Shift+j 			move down
bindsym $mod+Shift+k 			move up
bindsym $mod+Shift+l         	move right

# Same, but with cursor keys.
bindsym $mod+Shift+Left 		move left
bindsym $mod+Shift+Down 		move down
bindsym $mod+Shift+Up 			move up
bindsym $mod+Shift+Right 		move right

# Change layouts.
bindsym $mod+Shift+t        layout tabbed
bindsym $mod+e 			    layout toggle split
bindsym $mod+f			    fullscreen
bindsym $mod+Shift+space    floating toggle

# Splitting mode.
bindsym $mod+g 		split h
bindsym $mod+v 		split v

# Floating mode.
floating_modifier 	$mod
bindsym $mod+space	focus mode_toggle

# Sticky a window. You need the latest next-git version.
bindsym $mod+Shift+S sticky toggle

# Scratchpad.
bindsym $mod+Shift+minus move scratchpad
bindsym $mod+minus scratchpad show

# Start a terminal window.
bindsym $mod+Return	exec $term

# Modes:
bindsym $mod+r mode "resize"
bindsym $mod+Shift+g mode "$mode_gaps"
bindsym $mod+Shift+i mode Ignore

# ---------------------------------
# -- Modes:
# ---------------------------------

# Gaps mode.
set $mode_gaps Gaps: (o) outer, (i) inner
set $mode_gaps_outer Outer Gaps: +|-|0 (local), Shift + +|-|0 (global)
set $mode_gaps_inner Inner Gaps: +|-|0 (local), Shift + +|-|0 (global)

mode "$mode_gaps" {
    bindsym o      mode "$mode_gaps_outer"
    bindsym i      mode "$mode_gaps_inner"
    bindsym Return mode "default"
    bindsym Escape mode "default"
}

mode "$mode_gaps_inner" {
    bindsym plus  gaps inner current plus 5
    bindsym minus gaps inner current minus 5
    bindsym 0     gaps inner current set 0

    bindsym Shift+plus  gaps inner all plus 5
    bindsym Shift+minus gaps inner all minus 5
    bindsym Shift+0     gaps inner all set 0

    bindsym Return mode "default"
    bindsym Escape mode "default"
}

mode "$mode_gaps_outer" {
    bindsym plus  gaps outer current plus 5
    bindsym minus gaps outer current minus 5
    bindsym 0     gaps outer current set 0

    bindsym Shift+plus  gaps outer all plus 5
    bindsym Shift+minus gaps outer all minus 5
    bindsym Shift+0     gaps outer all set 0

    bindsym Return mode "default"
    bindsym Escape mode "default"
}

# Resize mode.
mode "resize" {
        bindsym h resize grow left $resize px or $resize ppt
        bindsym k resize grow up $resize px or $resize ppt
        bindsym j resize shrink down $resize px or $resize ppt
        bindsym l resize grow right $resize px or $resize ppt

        bindsym Shift+l resize shrink left $resize px or $resize ppt
        bindsym Shift+j resize shrink up $resize px or $resize ppt
        bindsym Shift+k resize shrink down $resize px or $resize ppt
        bindsym Shift+h resize shrink right $resize px or $resize ppt

        bindsym Left resize grow left $resize px or $resize ppt
        bindsym Up resize grow up $resize px or $resize ppt
        bindsym Down resize grow down $resize px or $resize ppt
        bindsym Right resize grow right $resize px or $resize ppt

        bindsym Shift+Right resize shrink left $resize px or $resize ppt
        bindsym Shift+Down resize shrink up $resize px or $resize ppt
        bindsym Shift+Up resize shrink down $resize px or $resize ppt
        bindsym Shift+Left resize shrink right $resize px or $resize ppt

        bindsym Return mode "default"
        bindsym Escape mode "default"
}

# Ignore mode.
mode "Ignore" {
    bindsym Return mode default
    bindsym Escape mode default
}

# Start my defaults layouts on boot.
exec --no-startup-id "i3-msg 'workspace 1; append_layout /home/paced/.config/i3/workspace-1.json'"
exec --no-startup-id "i3-msg 'workspace 2; append_layout /home/paced/.config/i3/workspace-2.json'"
exec --no-startup-id "i3-msg 'workspace 3; append_layout /home/paced/.config/i3/workspace-3.json'"
exec --no-startup-id "i3-msg 'workspace 4; append_layout /home/paced/.config/i3/workspace-4.json'"

# ---------------------------------
# -- i3bar and colours:
# ---------------------------------

# Set colours.

set $base00 #000000
set $base01 #303030
set $base02 #505050
set $base03 #b0b0b0
set $base04 #d0d0d0
set $base05 #e0e0e0
set $base06 #f5f5f5
set $base07 #ffffff
set $base08 #fb0120
set $base09 #fc6d24
set $base0A #fda331
set $base0B #a1c659
set $base0C #76c7b7
set $base0D #6fb3d2
set $base0E #d381c3
set $base0F #be643c

# Start i3bar.
bar {
    strip_workspace_numbers yes
  position top
    status_command i3blocks
    separator_symbol " "
  # tray_output non
  font pango:gohufont 9
        colors {
        separator $base03
        background $base00
        statusline $base05
        focused_workspace $base00 $base01 $base03
        active_workspace $base00 $base01 $base05
        inactive_workspace $base00 $base00 $base02
        urgent_workspace $base00 $base09 $base07
    }
}

# Window colours:
client.focused $base00 $base00 $base00 $base00
client.focused_inactive $base00 $base00 $base00 $base00
client.unfocused $base00 $base00 $base00 $base00
client.urgent $base02 $base08 $base07 $base08
